import streamlit as st
import pandas as pd
import matplotlib.pyplot as plt
import seaborn as sns

# ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
data = pd.read_csv("Jadarat_data.csv")

# ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ù„Ù„Ø£Ø¹Ù…Ø¯Ø©
data.columns = [
    "Ø§Ù„Ù…Ø³Ù…Ù‰_Ø§Ù„ÙˆØ¸ÙŠÙÙŠ", "ØªØ§Ø±ÙŠØ®_Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†", "Ø§Ù„ÙˆØµÙ_Ø§Ù„ÙˆØ¸ÙŠÙÙŠ", "Ø§Ù„Ù…Ù‡Ø§Ù…_Ø§Ù„ÙˆØ¸ÙŠÙÙŠØ©",
    "Ø§Ø³Ù…_Ø§Ù„Ø´Ø±ÙƒØ©", "Ø±Ù‚Ù…_Ø§Ù„Ù…Ù†Ø´Ø£Ø©", "Ù†ÙˆØ¹_Ø§Ù„Ø´Ø±ÙƒØ©", "Ø­Ø¬Ù…_Ø§Ù„Ø´Ø±ÙƒØ©", "Ø§Ù„Ù†Ø´Ø§Ø·_Ø§Ù„Ø§Ù‚ØªØµØ§Ø¯ÙŠ",
    "Ø§Ù„Ù…Ø¤Ù‡Ù„Ø§Øª_Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©", "Ø§Ù„Ù…Ù†Ø·Ù‚Ø©", "Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©", "Ø§Ù„Ù…Ø²Ø§ÙŠØ§_Ø§Ù„ÙˆØ¸ÙŠÙÙŠØ©",
    "Ù†ÙˆØ¹_Ø§Ù„Ø¹Ù‚Ø¯", "Ø¹Ø¯Ø¯_Ø§Ù„ÙˆØ¸Ø§Ø¦Ù", "Ø±Ù‚Ù…_Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†", "Ø§Ù„Ø®Ø¨Ø±Ø©_Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©", "Ø§Ù„Ø¬Ù†Ø³"
]

# Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØµÙØ­Ø©
st.title("ðŸ“Š ØªØ­Ù„ÙŠÙ„ Ø³ÙˆÙ‚ Ø§Ù„ÙˆØ¸Ø§Ø¦Ù ÙÙŠ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©")
st.markdown("""
### **Ù‡Ù„ ÙØ¹Ù„Ø§Ù‹ Ø³ÙˆÙ‚ Ø§Ù„Ø¹Ù…Ù„ ÙŠØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø¨Ø±Ø©ØŸ ðŸ¤”**
ðŸ”¹ ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„ØªØ­Ù„ÙŠÙ„ØŒ Ø³Ù†Ù„Ù‚ÙŠ Ù†Ø¸Ø±Ø© Ø¹Ù„Ù‰ Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„ÙˆØ¸Ø§Ø¦Ù ÙÙŠ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©ØŒ ÙˆÙ†Ø±Ù‰ ÙƒÙŠÙ ØªØ®ØªÙ„Ù Ø­Ø³Ø¨ Ø§Ù„Ø®Ø¨Ø±Ø©ØŒ ÙˆØ§Ù„Ø¬Ù†Ø³ØŒ ÙˆØ§Ù„Ù…Ù†Ø·Ù‚Ø©.
""")

# Ø¥Ø¶Ø§ÙØ© ÙÙ„Ø§ØªØ± ØªÙØ§Ø¹Ù„ÙŠØ©
region_filter = st.sidebar.selectbox("ðŸ” Ø§Ø®ØªØ± Ø§Ù„Ù…Ù†Ø·Ù‚Ø©", options=["Ø§Ù„ÙƒÙ„"] + list(data["Ø§Ù„Ù…Ù†Ø·Ù‚Ø©"].unique()))
gender_filter = st.sidebar.radio("ðŸ‘¥ Ø§Ø®ØªØ± Ø§Ù„Ø¬Ù†Ø³", ["Ø§Ù„ÙƒÙ„", "Ø°ÙƒØ±", "Ø£Ù†Ø«Ù‰", "ÙƒÙ„Ø§ Ø§Ù„Ø¬Ù†Ø³ÙŠÙ†"])
experience_filter = st.sidebar.slider("ðŸŽ“ Ø¹Ø¯Ø¯ Ø³Ù†ÙˆØ§Øª Ø§Ù„Ø®Ø¨Ø±Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©", 0, int(data["Ø§Ù„Ø®Ø¨Ø±Ø©_Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©"].max()), (0, int(data["Ø§Ù„Ø®Ø¨Ø±Ø©_Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©"].max())))

# ØªØµÙÙŠØ© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„ÙÙ„Ø§ØªØ±
filtered_data = data.copy()
if region_filter != "Ø§Ù„ÙƒÙ„":
    filtered_data = filtered_data[filtered_data["Ø§Ù„Ù…Ù†Ø·Ù‚Ø©"] == region_filter]
if gender_filter != "Ø§Ù„ÙƒÙ„":
    filtered_data = filtered_data[filtered_data["Ø§Ù„Ø¬Ù†Ø³"] == gender_filter]
filtered_data = filtered_data[(filtered_data["Ø§Ù„Ø®Ø¨Ø±Ø©_Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©"] >= experience_filter[0]) & (filtered_data["Ø§Ù„Ø®Ø¨Ø±Ø©_Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©"] <= experience_filter[1])]

# Ø¹Ø±Ø¶ Ø¨Ø¹Ø¶ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ©
st.markdown(f"#### ðŸ“Œ Ø¹Ø¯Ø¯ Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…ØªØ§Ø­Ø© Ø¨Ø¹Ø¯ Ø§Ù„ØªØµÙÙŠØ©: {filtered_data.shape[0]}")
st.write("ðŸ‘€ Ù„Ù…Ø­Ø© Ø¹Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:", filtered_data[["Ø§Ù„Ù…Ø³Ù…Ù‰_Ø§Ù„ÙˆØ¸ÙŠÙÙŠ", "Ø§Ø³Ù…_Ø§Ù„Ø´Ø±ÙƒØ©", "Ø§Ù„Ù…Ù†Ø·Ù‚Ø©", "Ø§Ù„Ø®Ø¨Ø±Ø©_Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©", "Ø§Ù„Ø¬Ù†Ø³"]].head())

# **Ø±Ø³Ù… Ø¨ÙŠØ§Ù†ÙŠ: ØªÙˆØ²ÙŠØ¹ Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø­Ø³Ø¨ Ø§Ù„Ù…Ù†Ø§Ø·Ù‚**
st.subheader("ðŸŒ ØªÙˆØ²ÙŠØ¹ Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø­Ø³Ø¨ Ø§Ù„Ù…Ù†Ø§Ø·Ù‚")
plt.figure(figsize=(10, 5))
sns.countplot(y=filtered_data["Ø§Ù„Ù…Ù†Ø·Ù‚Ø©"], order=filtered_data["Ø§Ù„Ù…Ù†Ø·Ù‚Ø©"].value_counts().index, palette="Blues_r")
plt.xlabel("Ø¹Ø¯Ø¯ Ø§Ù„ÙˆØ¸Ø§Ø¦Ù")
plt.ylabel("Ø§Ù„Ù…Ù†Ø·Ù‚Ø©")
st.pyplot(plt)

# **Ø±Ø³Ù… Ø¨ÙŠØ§Ù†ÙŠ: Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„Ø®Ø¨Ø±Ø©**
st.subheader("ðŸŽ“ Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„Ø®Ø¨Ø±Ø© ÙÙŠ Ø§Ù„ÙˆØ¸Ø§Ø¦Ù")
plt.figure(figsize=(8, 5))
sns.histplot(filtered_data["Ø§Ù„Ø®Ø¨Ø±Ø©_Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©"], bins=10, kde=True, color="green")
plt.xlabel("Ø¹Ø¯Ø¯ Ø³Ù†ÙˆØ§Øª Ø§Ù„Ø®Ø¨Ø±Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©")
plt.ylabel("Ø¹Ø¯Ø¯ Ø§Ù„ÙˆØ¸Ø§Ø¦Ù")
st.pyplot(plt)

# **Ø±Ø³Ù… Ø¨ÙŠØ§Ù†ÙŠ: ØªÙˆØ²ÙŠØ¹ Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø­Ø³Ø¨ Ø§Ù„Ø¬Ù†Ø³**
st.subheader("ðŸ‘¥ Ù‡Ù„ Ù‡Ù†Ø§Ùƒ ØªÙØ¶ÙŠÙ„ Ù…Ø¹ÙŠÙ† Ù„Ù„Ø¬Ù†Ø³ ÙÙŠ Ø§Ù„ÙˆØ¸Ø§Ø¦ÙØŸ")
gender_counts = filtered_data["Ø§Ù„Ø¬Ù†Ø³"].value_counts()
plt.figure(figsize=(6, 4))
plt.pie(gender_counts, labels=gender_counts.index, autopct="%1.1f%%", colors=["blue", "pink", "gray"])
st.pyplot(plt)

# **Ù…Ù„Ø§Ø­Ø¸Ø© ØªØ­Ù„ÙŠÙ„ÙŠØ© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…**
st.markdown("""
ðŸ“Œ **Ø£Ù‡Ù… Ø§Ù„Ù†ØªØ§Ø¦Ø¬:**  
ðŸ”¸ Ø§Ù„ÙˆØ¸Ø§Ø¦Ù ÙÙŠ Ø§Ù„Ù…Ø¯Ù† Ø§Ù„ÙƒØ¨Ø±Ù‰ Ù…Ø«Ù„ **Ø§Ù„Ø±ÙŠØ§Ø¶ØŒ Ø¬Ø¯Ø©ØŒ ÙˆØ§Ù„Ø¯Ù…Ø§Ù…** Ø£Ø¹Ù„Ù‰ Ù…Ù† Ø¨Ù‚ÙŠØ© Ø§Ù„Ù…Ù†Ø§Ø·Ù‚.  
ðŸ”¸ **Ø§Ù„Ø®Ø¨Ø±Ø© Ù…Ø·Ù„ÙˆØ¨Ø© Ø¨Ø´Ø¯Ø©** ÙÙŠ Ø¨Ø¹Ø¶ Ø§Ù„Ù‚Ø·Ø§Ø¹Ø§ØªØŒ Ø¨ÙŠÙ†Ù…Ø§ Ù‡Ù†Ø§Ùƒ ÙˆØ¸Ø§Ø¦Ù Ù„Ø§ ØªØªØ·Ù„Ø¨ Ø®Ø¨Ø±Ø©.  
ðŸ”¸ Ø¨Ø¹Ø¶ Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ù…Ø®ØµØµØ© Ù„Ù„Ø¬Ù†Ø³ÙŠÙ†ØŒ Ù„ÙƒÙ† **Ù‡Ù†Ø§Ùƒ ØªØ¨Ø§ÙŠÙ† ÙˆØ§Ø¶Ø­ Ø¨ÙŠÙ† Ø¨Ø¹Ø¶ Ø§Ù„Ù…Ø¬Ø§Ù„Ø§Øª.**
""")

st.success("âœ… ØªØ­Ù„ÙŠÙ„Ù†Ø§ ÙŠÙˆØ¶Ø­ Ù…Ø¯Ù‰ Ø£Ù‡Ù…ÙŠØ© Ø§Ù„Ø®Ø¨Ø±Ø© ÙÙŠ Ø³ÙˆÙ‚ Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØŒ ÙˆÙ„ÙƒÙ† Ù‡Ù†Ø§Ùƒ Ø£ÙŠØ¶Ø§Ù‹ ÙØ±Øµ Ù„Ù„Ø¨Ø§Ø­Ø«ÙŠÙ† Ø§Ù„Ø¬Ø¯Ø¯ Ø¹Ù† Ø§Ù„Ø¹Ù…Ù„! ðŸš€")
